{"version":3,"sources":["frontend/woocommerce-bluesnap-multicurrency.js"],"names":["$","on","this","closest","submit","cookie_name","woocommerce_bluesnap_multicurrency_params","init","currency_cookie","get_cookie","currency_shown","get_shown_currency_price","adjust_frontend","name","v","document","cookie","match","first_price","first","attr","currency","each","removeClass","addClass","val","jQuery"],"mappings":"CAAA,SAAWA,GACV,aAGAA,EAAG,2BAA4BC,GAC9B,SAAU,oCAAqC,WAC9CD,EAAGE,MAAOC,QAAS,QAASC,WAQT,CACpBC,YAAaC,0CAA0CD,YACvDE,KAAM,WACL,IAAIC,EAAkBN,KAAKO,WAAYP,KAAKG,aACxCK,EAAkBR,KAAKS,2BACtBH,GAAmBA,GAAmBE,GAC1CR,KAAKU,gBAAiBJ,IAGxBC,WAAY,SAASI,GACpB,IAAIC,EAAIC,SAASC,OAAOC,MAAO,UAAYJ,EAAO,iBAClD,OAAOC,EAAIA,EAAE,GAAK,MAMnBH,yBAA0B,WACzB,IAAIO,EAAclB,EAAG,kBAAmBmB,QACxC,OAAOnB,EAAGkB,GAAcE,KAAM,aAM/BR,gBAAiB,SAAUS,GAC1BrB,EAAG,gCAAiCsB,KACnC,WACMtB,EAAGE,MAAOkB,KAAM,aAAgBC,EACpCrB,EAAGE,MAAOqB,YAAa,iBAAkBC,SAAU,iBAEnDxB,EAAGE,MAAOqB,YAAa,iBAAkBC,SAAU,mBAItDxB,EAAG,+BAAgCyB,IAAKJ,KAG3Bd,OApDhB,CAsDImB","file":"../../../../js/frontend/woocommerce-bluesnap-multicurrency.min.js","sourcesContent":["(function( $ ) {\n\t'use strict';\n\n\t// Multicurrency form submit\n\t$( '.bluesnap-multicurrency' ).on(\n\t\t'change', 'select.bluesnap_currency_selector', function() {\n\t\t\t$( this ).closest( 'form' ).submit();\n\t\t}\n\t);\n\n\t/**\n\t * In case there is cache on the site, and backend hooks are not represented on frontend, we have to handle the currency changes on frontend level.\n\t * @type {{cookie_name: *, init: init, get_cookie: (function(*): any), get_shown_currency_price: (function(): *), adjust_frontend: adjust_frontend}}\n\t */\n\tvar cookie_handler = {\n\t\tcookie_name: woocommerce_bluesnap_multicurrency_params.cookie_name,\n\t\tinit: function() {\n\t\t\tvar currency_cookie = this.get_cookie( this.cookie_name );\n\t\t\tvar currency_shown  = this.get_shown_currency_price();\n\t\t\tif ( currency_cookie && currency_cookie != currency_shown ) {\n\t\t\t\tthis.adjust_frontend( currency_cookie );\n\t\t\t}\n\t\t},\n\t\tget_cookie: function(name) {\n\t\t\tvar v = document.cookie.match( '(^|;) ?' + name + '=([^;]*)(;|$)' );\n\t\t\treturn v ? v[2] : null;\n\t\t},\n\t\t/**\n\t\t * Get the first price shown, and takes it currency.\n\t\t * @returns {string}\n\t\t */\n\t\tget_shown_currency_price: function() {\n\t\t\tvar first_price = $( '.currency-show' ).first();\n\t\t\treturn $( first_price ).attr( 'currency' );\n\t\t},\n\t\t/**\n\t\t * Adjust all frontend according to the real cookie value.\n\t\t * @param currency\n\t\t */\n\t\tadjust_frontend: function( currency ) {\n\t\t\t$( '.bluesnap-multicurrency-html' ).each(\n\t\t\t\tfunction(){\n\t\t\t\t\tif ( $( this ).attr( 'currency' ) == currency ) {\n\t\t\t\t\t\t$( this ).removeClass( 'currency-hide' ).addClass( 'currency-show' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$( this ).removeClass( 'currency-show' ).addClass( 'currency-hide' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t\t$( \".bluesnap_currency_selector\" ).val( currency );\n\t\t}\n\t};\n\tcookie_handler.init();\n\n})( jQuery );\n\n//# sourceMappingURL=../../source/_maps/js/frontend/woocommerce-bluesnap-multicurrency.js.map\n"]}