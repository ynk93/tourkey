$(document).ready(function(){function a(a){c=1;var f={action:"traveling_store_shop_filters",query:a,page:c,meta_key:"_wc_average_rating"};d&&d.length&&(f.meta_key=d,f.order=e),$.ajax({url:b,data:f,type:"GET",success:function(a){a?$(".catalogSection .cardsRow").empty().append(a):$(".catalogSection .cardsRow").empty().append("<div class=\"empty-product\">Not found</div>")}})}const b="/wp-admin/admin-ajax.php";var c=1;const d="_wc_average_rating",e="ASC";class f{get getFilters(){const a={},b=$(".catalogSideBarWrap").find(".sideBarBlock").map(function(a,b){const c={};var d=[];const e=$(b).data("group");return $(b).find(".sideBarBody .chbWrap").map(function(a,b){const c=$(b).find(".ajax-input").map(function(a,b){return $(b).get()});d.push(c)}),c[e]=d,c}).map(function(b,c){Object.assign(a,c)});return a}get checkedFilters(){const a=this.getFilters,b={};for(const c in a){const d=a[c];for(const a in d){const e=d[a],f=e.filter(":checked");if(0!==f.length){const d={};d[a]=f,b[c]=Object.assign(b[c]?b[c]:{},d)}}}return b}checkFilters(){$(".ajax-input:checked").prop("checked",!1);var a;a="undefined"==typeof initQs?function(c){if(""==c)return{};for(var a,d={},b=0;b<c.length;++b)a=c[b].split("=",2),d[a[0]]=1==a.length?"":decodeURIComponent(a[1].replace(/\+/g," "));return d}(window.location.search.substr(1).split("&")):initQs,Object.values(a).map(function(a){const b=a.split(",");b.map(function(a){$(".ajax-input[data-id=\""+a+"\"]").prop("checked",!0).trigger("initCheckbox")})})}}class g{constructor(a,b){this.filters=a,this.checkedFilters=b}get queryObject(){var a={};this.filters;return Object.values(this.checkedFilters).map(function(b){Object.values(b).map(function(b){b.get().map(function(b){const c=$(b).data("term"),d=$(b).data("id");"filter"===$(b).parents(".filtersGroup").data("group")?!$(b).hasClass("generalCheckbox")&&(void 0===a[c]?a[c]=[d]:a[c].push(d)):void 0===a[c]?a[c]=[d]:a[c].push(d)})})}),a}get queryString(){var a="";const b=this.queryObject,c=Object.keys(b);return c.map(function(c){const d=b[c];""===a?a=c+"="+d:a+="&"+c+"="+d}),a}get prettyString(){function a(a,d,e){a.map(function(a){const f=c[d][a],g=e[a],h=Object.values(f.get()).filter(function(a){return $(a).hasClass("ajax-input")});f.length===g.length&&"filter"!==d?"product_cat"===$(h).data("term")?b="category/"+$(h).data("id")+"/":"product_tag"===$(h).data("term")&&(b="by/"+$(h).data("id")+"/"):1===g.length?"categories"===$(h).data("id")?b="categories/"+$(h).data("id")+"/":"product_cat"===$(h).data("term")?b="category/"+$(h).data("id")+"/":"product_tag"===$(h).data("term")?b="by/"+$(h).data("id")+"/":b="filter/"+$(h).data("slug")+"/"+$(h).data("id")+"/":b=""})}var b="";const c=this.filters,d=this.checkedFilters,e=Object.keys(d);return 1===e.length?e.map(function(b){const c=d[b],e=Object.keys(c);1===e.length&&a(e,b,c)}):b="",""!=b&&b}pushQuery(){const a=""===this.queryString?"":"?"+this.queryString,b=!1===this.prettyString?"/tours/"+a:"/tours/"+this.prettyString;history.pushState({query:b},"state"+b,b)}}$(document).on("change",".ajax-input",function(){const b=new f,c=new g(b.getFilters,b.checkedFilters);c.pushQuery(),a(c.queryString)});const h=new f;h.checkFilters()});